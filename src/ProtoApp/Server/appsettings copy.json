{
  "logging": {
    "LogLevel": {
      "Default": "Information",
      "Rieter.HMI": "Debug",
      "Rieter.HMI.OpcUa.Client.OpcDataImage": "Warning",
      "Microsoft.AspNetCore.Mvc.Infrastructure": "Warning",
      "Microsoft.EntityFrameworkCore": "Warning",
      "Microsoft.Hosting.Lifetime": "Debug",
      "Opc.Ua.Client": "Error"
    },
    "configurator": {
      // "sysLogger": {
      //   "type": "Tlabs.Config.SysLoggingConfigurator, Tlabs.Core",
      //   "options": {
      //     "TimestampFormat": "HH:mm:ss",
      //     "IncludeScopes": false
      //   }
      // },
      "stdoutLogger": {
        "type": "Tlabs.Config.StdoutLoggingConfigurator, Tlabs.Core",
        "options": {
          "TimestampFormat": "HH:mm:ss.fff",   //shortend timestamp
          "includeCategory": false
        }
      },
      "fileLogger": {
        "type": "Tlabs.Config.FileLoggingConfigurator, Tlabs.Core",
        "options": {
          "LogLevel": {
            "Default": "Information",
            "Rieter": "Information",
            "Rieter.HMI.OpcUa.Client.OpcDataImage": "Warning",
            "Microsoft.AspNetCore.Mvc.Infrastructure": "Warning",
            "Microsoft.EntityFrameworkCore": "Warning",
            "Microsoft.EntityFrameworkCore.Model.Validation": "Error",
            "Microsoft.Hosting.Lifetime": "Debug",
            "Opc.Ua.Client": "Error"
          },
          "IncludeScopes": false,
          "PathFormat": "%EXEPATH%/log/log-{Hour}.txt",
          "RetainedFileCountLimit": 15,
          "RollOnFileSizeLimit": true
          // "FileSizeLimitBytes": 102400,
        }
      }
    }
  },

  "webHosting": {
    "urls": "http://+:8001",
    "webroot": "rsc/a6-bcs",        //"rsc/a6-bcs", "rsc/drawframe",
    "configurator": {
      "assemblyPath": {
        "ord": 10,
        "type": "Tlabs.Config.AssemblyPathWebHostConfigurator, Tlabs.SrvBase",
        "config": {
          "path": ".;binx"
        }
      },
      "serverKestrel": {
        "ord": 100,
        "type": "Tlabs.Config.KestrelConfigurator, Tlabs.SrvBase",
        "options": {
          "Limits": {
            "MaxRequestBodySize": 33330000
          }
        }
      }
    }
  },

  "applicationMiddleware": {
    "shutdownHandler": {
      "ord": 9,
      "type": "Tlabs.Config.ShutdownConfigurator, Tlabs.SrvBase"
    },
    "staticPages": {
      "ord": 10,
      "type": "Tlabs.Config.StaticContentConfigurator, Tlabs.SrvBase",
      "config": {
        "defaultPage": "index.html",
        "favicon.ico": "favicon.ico",
        "/apidoc": "rsc/apidoc"
      }
    },
    "debugPages": {
      "ord": 20,
      "type": "Tlabs.Config.DebugPagesConfigurator, Tlabs.SrvBase"
    },
    "websockets": {
      "ord": 30,
      "type": "Tlabs.Config.WebsocketConfigurator, Tlabs.SrvBase"
    },
    "MVC": {
      "ord": 500,
      "type": "Tlabs.Config.MvcMiddlewareConfigurator, Tlabs.SrvBase"
    },
    "DbRestore": {
      "ord": 600,
      "type": "Rieter.HMI.Server.SqliteDbRestore`1+Configurator[[Rieter.HMI.Config.A6HmiConfig, HMI.A6BCSModule]], HMI.SqLiteDataStore"
    },
    "DataStoreValidation": {
      "ord": 610,
      "type": "Tlabs.Data.DataStoreValidationConfigurator, Tlabs.SrvBase"
    },
    "ServicesStartup": {
      "ord": 700,
      "type": "Rieter.HMI.Server.ServicesStartup+Configurator, HMI.BaseServices",
      "config": {
        "launchHmi": true
      }
    }
  },

  "applicationServices": {
    "ASPNET.MVC": {
      "type": "Tlabs.Config.MvcSvcConfigurator, Tlabs.SrvBase",
      "config": {
        // "001_filterApiKeyAuth": "Tlabs.Server.Auth.ApiKeyRegistryAuthFilter, Tlabs.SrvBase",
        // "002_filterUserAuth": "Tlabs.Server.Auth.AuthCookieAuthorizationFilter, Tlabs.SrvBase",
        // "003_filterParams": "Tlabs.Server.Auth.RoleDefaultParamsFilter, Tlabs.SrvBase",
        "004_filterHttpEncoding": "Tlabs.Server.Url.RouteParamDecodeFilter, Tlabs.SrvBase",
        "formatting": "Indented" //"None"
      }
    },
    "Json.Serializer": {
      "type": "Tlabs.Data.Serialize.Json.JsonFormat+Configurator, Tlabs.Data"
    },
    "httpEncodingFilter":{
      "type":"Tlabs.Server.Url.RouteParamDecodeFilter+Configurator, Tlabs.SrvBase"
    },

    "Persistence.BaseEntities": {
      "type": "Tlabs.Data.RepositoriesConfigurator, Tlabs.Data",
      "config": {
        "timeZone": "UTC"
      }
    },
    "Persistence.UserEnityModel": {
      "type": "Tlabs.Data.Store.UserEnityModel, Tlabs.EfDataStore"
    },
    "Persistence.DataStore": {
      "type": "Tlabs.Data.Store.DataStoreConfigurator`1, Tlabs.EfDataStore & Tlabs.Data.Store.AggregatingDStoreCtxConfigurator, Tlabs.EfDataStore"
    },
    "Persistence.SqLiteDbProvider": {
      "type": "Tlabs.Data.Store.SqliteConfigurator, HMI.SqLiteDataStore",
      "config": {
        "connection": "DataSource=rsc/store/__HMIdb.sqlite;Foreign Keys=True", //;Default Timeout=35;Pooling=True"
        "migrationAssembly": "HMI.A6BCSStore"
      }
    },
    "Persistence.DbRestore": {
      "type": "Rieter.HMI.Server.SqliteDbRestore`1+Configurator[[Rieter.HMI.Config.A6HmiConfig, HMI.A6BCSModule]], HMI.SqLiteDataStore",
      "options": {
        "restoreDb": "../intg.svc.bak"
      }
    },

    "IdentityOptions": {
      "type": "Tlabs.Config.IdentityConfigurator, Tlabs.SrvBase",
      "config": {
        "idleLogoffMinutes": 30,
        "RequiredLength": 0,
        "RequireDigit": false,
        "RequireNonAlphanumeric": false,
        "RequireUppercase": false,
        "RequireLowercase": false,
        "RequireUniqueEmail": false
      }
    },
    "systemCli": {
      "type": "Tlabs.Sys.SystemCli+Configurator, Tlabs.Core",
      "sysCommands": {
        "LINUX": {
          "shell": ["/bin/bash", "{0}"],
          "cmdLines": {
            "hello": {"cmd": ["./hello.sh", "{0}", "{1}"], "wrkDir": "rsc/cmd"},
            "reboot": {"cmd": ["./reboot.sh"], "wrkDir": "rsc/cmd"},
            "hmi": {"cmd": ["./launchHMI.sh", "{0}"], "wrkDir": "rsc/cmd"},
            "hmiStop": {"cmd": ["./stopHMI.sh"], "wrkDir": "rsc/cmd"},
            "getIp": {"cmd": ["./currentIP.sh"], "wrkDir": "rsc/cmd"},
            "setIp": {"cmd": ["./setStaticIp.sh", "{0}", "{1}", "{2}"], "wrkDir": "rsc/cmd"},
            "datetime": {"cmd": ["./datetime.sh", "{0}"], "wrkDir": "rsc/cmd"},
            "srcWakeup": { "cmd": ["./scrWakeup.sh"], "wrkDir": "rsc/cmd"},
            "hmiUpdate": { "cmd": ["./install-intg.svc.sh", "{0}"], "wrkDir": "rsc/cmd"},
            "getBrght": { "cmd": ["./getBrightness.sh"], "wrkDir": "rsc/cmd"},
            "setBrght": { "cmd": ["./setBrightness.sh", "{0}"], "wrkDir": "rsc/cmd"},
            "cpuTemp": { "cmd": ["./getCpuTemp.sh"], "wrkDir": "rsc/cmd"},
            "getScrTime": { "cmd": ["./getScrTimeout.sh"], "wrkDir": "rsc/cmd"},
            "setScrTime": { "cmd": ["./setScrTimeout.sh", "{0}"], "wrkDir": "rsc/cmd"}
          }
        },
        "WINDOWS": {
          "shell": ["cmd.exe", "/c", "{0}"],
          "cmdLines": {
            "hello": {"cmd": [".\\hello.cmd", "{0}", "{1}"], "wrkDir": "rsc\\cmd"},
            "reboot": {"cmd": [".\\reboot.cmd"], "wrkDir": "rsc\\cmd"},
            "hmi": {"cmd": [".\\launchHMI.cmd", "{0}"], "wrkDir": "rsc\\cmd"},
            "hmiStop": {"cmd": [".\\stopHMI.cmd"], "wrkDir": "rsc\\cmd"},
            "getIp": {"cmd": [".\\currentIP.cmd"], "wrkDir": "rsc\\cmd"},
            "setIp": {"cmd": [".\\setStaticIp.cmd", "{0}", "{1}", "{2}"], "wrkDir": "rsc\\cmd"},
            "datetime": {"cmd": [".\\datetime.cmd", "{0}"], "wrkDir": "rsc\\cmd"},
            "srcWakeup": { "cmd": [".\\scrWakeup.cmd"], "wrkDir": "rsc\\cmd"},
            "hmiUpdate": { "cmd": [".\\hello.cmd", "{0}"], "wrkDir": "rsc/cmd"},
            "getBrght": { "cmd": [".\\getBrightness.cmd"], "wrkDir": "rsc\\cmd"},
            "setBrght": { "cmd": [".\\setBrightness.cmd", "{0}"], "wrkDir": "rsc\\cmd"},
            "cpuTemp": { "cmd": [".\\getCpuTemp.cmd"], "wrkDir": "rsc\\cmd"},
            "getScrTime": { "cmd": [".\\getScrTimeout.cmd"], "wrkDir": "rsc\\cmd"},
            "setScrTime": { "cmd": [".\\setScrTimeout.cmd", "{0}"], "wrkDir": "rsc\\cmd"}
          }
        }
      }
    },
    "OpcUaClient": {
      "type": "Rieter.HMI.OpcUa.Client.Config.OpcUaClientConfigurator, OpcUA.Client",
      "session": {
        "ServerUrl": "opc.tcp://172.27.19.83:4840", //"none" "opc.tcp://red-xls.tlabs.wor.net:4840" "opc.tcp://172.27.19.81:4840"
        "ServerDiscoveryTimeout": 150000,
        "PingConnectionTimeout": 10000,
        "PublishingInterval": 500,
        "ModelCfg": {
          "ModelFilePath": "rsc/store/opcModel_A6.json",
          "InitPaths": ["ini_uni9/visConfList"]
        }
      }
      // "unused_session": {
      //   "ServerUrl": "opc.tcp://172.27.19.83:4840",
      //   "ModelCfg": {
      //     "Models": [{
      //       "NodeId": "ns=6;s=::",
      //       "ExclRefType": ["HasProperty"],
      //       "DataDepth": 4
      //     }]
      //   }
      // }
    },
    "wsMessaging": {
      "type": "Tlabs.Msg.Intern.WsMessenger+Configurator, Tlabs.SrvBase"
    },
    "ServicesStartup": {
      "type": "Rieter.HMI.Server.ServicesStartup+Configurator, HMI.BaseServices"
    },

    //HMI Modules
    "HmiConfig":        {"type": "Rieter.HMI.Config.HmiConfigurator, HMI.A6BCS",
      "config": {"hmiConfig": "rsc/store/__A6-bcs-config.json"}
    },
    "baseEntityModel":  {"type": "Tlabs.Data.Store.HmiBaseDataEntityModel, HMI.SqLiteDataStore"},
    "a6EntityModel":    {"type": "Tlabs.Data.Store.HmiA6EntityModel, HMI.A6BCSStore"},
    "dataSeeding":      {"type": "Tlabs.Config.ServiceTypeConfigurator, Tlabs.Core",
      "config": {
        "10_users": "Tlabs.Data.IDataSeed, Tlabs.Data | Rieter.HMI.Data.Seeding.HmiDataSeeding, HMI.A6BCSStore"
      }
    },
    "sysSettings":      {"type": "Rieter.HMI.Sys.HmiSystemSettings+Configurator, HMI.A6BCS"},
    "scopedData":       {"type": "Rieter.HMI.Scoped.HmiScopedData`1+Configurator[[Rieter.HMI.Config.A6HmiConfig, HMI.A6BCSModule]], HMI.BaseServices"},
    "alarmAdapter":     {"type": "Rieter.HMI.Alarm.AlarmEventsAdapter+Configurator, HMI.A6BCS"},
    "alarmHandling":    {"type": "Rieter.HMI.Alarm.HmiAlarmHandler`1+Configurator[[Rieter.HMI.Config.A6HmiConfig, HMI.A6BCSModule]], HMI.BaseServices"},
    "operationLog":     {"type": "Rieter.HMI.Machine.HmiAuditLog+Configurator, HMI.A6BCS"},
    "recipeStore":      {"type": "Rieter.HMI.Machine.HmiRecipeStore+Configurator, HMI.A6BCS"},
    "wasteTransport":   {"type": "Rieter.HMI.Machine.WasteTransportData+Configurator, HMI.A6BCS"},
    "recDataProvider":  {"type": "Rieter.HMI.Recording.HmiRecordedDataProvider`1+Configurator[[Rieter.HMI.Config.A6HmiConfig, HMI.A6BCSModule]], HMI.BaseServices"},
    "dataRecording":    {"type": "Rieter.HMI.Recording.HmiDataRecorder`1+Configurator[[Rieter.HMI.Config.A6HmiConfig, HMI.A6BCSModule]], HMI.BaseServices",
      "config": {"enabled": "true"}   //default "true"
    },
    "storageCleanup":   {"type": "Rieter.HMI.Storage.CleanupService`1+Configurator[[Rieter.HMI.Config.A6HmiConfig, HMI.A6BCSModule]], HMI.BaseModule",
      "config": {"cleanupInterval": 15}   //15 hours
    }
  },

  "appMessage": {}
}
